<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>replit</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    type="text/css" />
  <style>
    #loading {
      display: none;
    }

    #success {
      display: none;
      color: green;
    }
  </style>
</head>

<body>
  <div class="container mt-3">
    <h1>Add Movie</h1>

    <section class="my-3">
      <form id="postMovieForm">
        <div>
          <label for="title">Title:</label><br>
          <input type="text" id="title" />
        </div>

        <div class="my-3">
          <label for="releaseYear">Release Year:</label><br>
          <input type="text" id="releaseYear" />
        </div>

        <div class="my-3">
          <label for="selectGenre">Genre:</label><br>
          <select id="selectGenre">
            <option value="Action">Action</option>
            <option value="Drama">Drama</option>
            <option value="Comedy">Comedy</option>
            <option value="Romance">Romance</option>
            <option value="Thriller">Thriller</option>
            <option value="Fantasy">Fantasy</option>
            <option value="Sci-Fi">Sci-Fi</option>
            <option value="Horror">Horror</option>
            <option value="Sports">Sports</option>
            <option value="Musical">Musical</option>
            <option value="Other">Other</option>
          </select>
        </div>

        <div class="my-3">
          <label for="director">Director:</label><br>
          <input type="text" id="director" />
        </div>
        <div class="my-3">
          <label for="actor">Actor:</label><br>
          <input type="text" id="actor" />
        </div>

        <div class="my-3">
          <label for="language">Language:</label><br>
          <input type="text" id="language" />
        </div>

        <div class="my-3">
          <label for="selectCountry">Country:</label><br>
          <select id="selectCountry">
            <option value="India">India</option>
            <option value="USA">USA</option>
            <option value="UK">UK</option>
          </select>
        </div>

        <div class="my-3">
          <label for="rating">Rating:</label><br>
          <input type="number" step="any" id="rating" />
        </div>

        <div class="my-3">
          <label for="plot">Plot:</label><br>
          <textarea id="plot"></textarea>
        </div>

        <div class="my-3">
          <label for="awards">Awards:</label><br>
          <input type="text" id="awards" />
        </div>

        <div class="my-3">
          <label for="posterUrl">Poster URL:</label><br>
          <input type="url" id="posterUrl" />
        </div>

        <div class="my-3">
          <label for="trailerUrl">Trailer URL:</label><br>
          <input type="url" id="trailerUrl" />
        </div>

        <button class="btn btn-primary " type="submit">Add Movie</button>

      </form>
      <div id="postMovieContainer"></div>
    </section>

    <div id="loading">Sending Data...</div>
    <div id="success">Movie added Successfully...</div>
</body>

<script>
  const title = document.querySelector('#title')
  const releaseYear = document.querySelector('#releaseYear')
  const selectGenre = document.querySelector('#selectGenre')
  const director = document.querySelector('#director')
  const actor = document.querySelector('#actor')
  const language = document.querySelector('#language')
  const selectCountry = document.querySelector('#selectCountry')
  const rating = document.querySelector('#rating')
  const plot = document.querySelector('#plot')
  const awards = document.querySelector('#awards')
  const posterUrl = document.querySelector('#posterUrl')
  const trailerUrl = document.querySelector('#trailerUrl')
  const postMovieContainer = document.querySelector('#postMovieContainer')
  const loading = document.querySelector('#loading')
  const success = document.querySelector('#success')
  const apiUrl = "https://va-5-assignment-express-student-neog.replit.app/movies";

  postMovieForm.addEventListener("submit", function (event) {
    event.preventDefault();
    loading.style.display = "block"

    const movieData = {
      title: title.value,
      releaseYear: releaseYear.value,
      selectGenre: selectGenre.value,
      director: director.value,
      actor: actor.value,
      language: language.value,
      selectCountry: selectCountry.value,
      rating: rating.value,
      plot: plot.value,
      awards: awards.value,
      posterUrl: posterUrl.value,
      trailerUrl: trailerUrl.value,
    }

    fetch(apiUrl, {
      method: "POST",
      body: JSON.stringify(movieData),
      headers: {
        'Content-Type': 'application/json'
      }
    }).then(function (response) {
      return response.json()

    }).then(function (data) {
      if (data) {
        loading.style.display = "none"
        success.style.display = "block"

      }
    })

  })
</script>


</html>